(this.webpackJsonpgraphpainter=this.webpackJsonpgraphpainter||[]).push([[0],{27:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(11),c=n.n(o),a=(n(27),n(3)),h=function(t){return t.reduce((function(t,e){var n=e.split(" "),r=Object(a.a)(n,3),i=r[0],o=r[1],c=r[2];return""===i?t:(t[i]=t[i]||[],void 0===o&&void 0===c||""===o||t[i].push([o,c]),t)}),{})},u=n(5),s=n(2),f="SETSHORTESTPATH",d={from:"",to:"",path:{}},j=function(t){return{type:f,payload:t}};var l="SETGRAPHINFO",b={graph:{vertexCount:"0",edgeCount:"",graph:{}}};var g=n(18),v=n(1);function p(){var t=Object(u.c)(),e=Object(r.useState)("6\n1 2 2\n2 3 8\n3 4 1\n1 4 9\n4 5 7\n5 6 2\n4 6 6\n3 6 9"),n=Object(a.a)(e,2),i=n[0],o=n[1],c=Object(r.useMemo)((function(){return Object(g.debounce)((function(e){var n=function(t){var e=t.split("\n"),n=e[0].split(" "),r=Object(a.a)(n,2),i=r[0],o=r[1];if(!0!==isNaN(Number(i))||!0!==isNaN(Number(o)))return{vertexCount:i,edgeCount:o,graph:h(e.splice(1))}}(e);void 0!==n&&(t({type:l,payload:n}),t(j(d)))}),550)}),[t]),s=Object(r.useCallback)((function(t){o(t.target.value),c(t.target.value)}),[c]);return Object(r.useEffect)((function(){c(i)})),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("textarea",{style:{resize:"none"},value:i,onChange:s})})}var O=function(t){var e=t.onChange;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("label",{className:"direct-button",children:[Object(v.jsx)("input",{type:"checkbox",onChange:e}),Object(v.jsx)("span",{className:"onoff-switch"})]})})},x=function(t){var e=t.text,n=t.name,r=t.onChange,i=t.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("label",{style:{fontSize:"13px"},children:[" ",e," "]}),Object(v.jsx)("input",{type:"text",name:n,onChange:r,value:i,style:{width:"40px",height:"25px"}})]})},m="SETDIRECT",y={directed:!1};var k=n(6),C=n(8),w=n(19),T=n.n(w),I=Math.floor(Number.MAX_SAFE_INTEGER/987),M=function(){function t(e){Object(k.a)(this,t),this.initGraph=void 0,this.from=void 0,this.to=void 0,this.graph={},this.vertexCount=0,this.initGraph=e.getGraphInfo(),this.from=e.getFromVertex(),this.to=e.getToVertex(),this.vertexCount=Number(this.initGraph.vertexCount)}return Object(C.a)(t,[{key:"run",value:function(){return this.mapping(),!1!==this.isExistVertex()&&this.backtracking(this.dijkstra())}},{key:"mapping",value:function(){var t=this;Object.entries(this.initGraph.graph).forEach((function(e){var n=Object(a.a)(e,2),r=n[0],i=n[1];t.isExceedVertexCount(t.graph)&&i.length<=0||(t.graph[r]=t.graph[r]||{},i.forEach((function(e){var n=Object(a.a)(e,2),i=n[0],o=n[1];void 0===i&&void 0===o||t.isExceedVertexCount(t.graph)&&!t.graph[i]||(t.graph[i]=t.graph[i]||{},!1===Object.keys(t.graph[r]).includes(i)&&(t.graph[r][i]=o),!1===Object.keys(t.graph[i]).includes(r)&&(t.graph[i][r]=o))})))}))}},{key:"dijkstra",value:function(){var t=this,e={},n={};Object.keys(this.graph).forEach((function(t){e[t]=e[t]||I,n[t]=n[t]||t})),e[this.from]=0;var r=new T.a({comparator:function(t,e){return t[0]-e[0]}});r.queue([0,this.from]);for(var i=function(){var i=r.peek(),o=Object(a.a)(i,2),c=o[0],h=o[1];if(r.dequeue(),e[h]<c)return"continue";Object.entries(t.graph[h]).forEach((function(t){var i=Object(a.a)(t,2),o=i[0],u=i[1],s=Number(u)+c;s<e[o]&&(n[o]=h,e[o]=s,r.queue([s,o]))}))};r.length;)i();return n}},{key:"backtracking",value:function(t){for(var e={},n=this.to;n!==t[n];)e[n]=e[n]||!1,n=t[n];return e[n]=e[n]||!1,e[this.to]=!0,e[this.from]=!0,e}},{key:"isExistVertex",value:function(){return Object.keys(this.graph).includes(this.from)&&Object.keys(this.graph).includes(this.to)}},{key:"isExceedVertexCount",value:function(t){return Object.keys(this.graph).length>=this.vertexCount}}]),t}(),S=function(){function t(){Object(k.a)(this,t),this.graphInfo=void 0,this.from=void 0,this.to=void 0}return Object(C.a)(t,[{key:"setGraphInfo",value:function(t){return this.graphInfo=t,this}},{key:"setFromVertex",value:function(t){return this.from=t,this}},{key:"setToVertex",value:function(t){return this.to=t,this}},{key:"getGraphInfo",value:function(){return this.graphInfo}},{key:"getFromVertex",value:function(){return this.from}},{key:"getToVertex",value:function(){return this.to}},{key:"build",value:function(){return new M(this)}}]),t}(),E={margin:"12px",fontSize:"15px"},P=function(){var t=Object(u.c)(),e=Object(r.useState)({from:"",to:""}),n=Object(a.a)(e,2),i=n[0],o=n[1],c=Object(u.d)((function(t){return{graphInfo:t.graph.graph}})).graphInfo,h=function(t){var e=t.target,n=e.name,r=e.value;o("path-from"===n?function(t){return Object(s.a)(Object(s.a)({},t),{},{from:r})}:function(t){return Object(s.a)(Object(s.a)({},t),{},{to:r})})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"config",children:[Object(v.jsx)("label",{style:E,children:"Undirected : Directed"}),Object(v.jsx)(O,{onChange:function(e){return t((n=e.target.checked,{type:m,payload:n}));var n}}),Object(v.jsx)("label",{style:E,children:"Shortest Path Find"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(x,{text:"from",name:"path-from",onChange:h,value:i.from}),Object(v.jsx)(x,{text:"to",name:"path-to",onChange:h,value:i.to})]}),Object(v.jsx)("button",{onClick:function(){var e=(new S).setGraphInfo(c).setFromVertex(i.from).setToVertex(i.to).build().run();!1!==e&&t(j({from:i.from,to:i.to,path:e}))},children:"Find"}),Object(v.jsx)("img",{onClick:function(){return window.open("https://github.com/dkpark10/graphpainter","_blank")},style:{width:"45px",height:"45px",cursor:"pointer"},alt:"my github",src:"https://media.cdnandroid.com/item_images/1097581/imagen-github-0thumb.jpeg"})]})})};function N(){return Object(v.jsxs)("aside",{children:[Object(v.jsx)(p,{}),Object(v.jsx)(P,{})]})}var B=function(){return Object(v.jsx)("header",{children:Object(v.jsx)("h1",{children:"Graph Painter"})})},F=n(12),A=n(22),G=function(t){var e=t.size,n=t.value,i=t.onPointerDown,o=t.onPointerUp,c=t.onPointerMove,a=t.isDraged,h=t.color,u=void 0===h?"#cfcfcf":h,s=e.y,f=e.x,d=Object(r.useRef)(null),j=Object(r.useRef)(null),l=a.dragActive&&a.currentNode===d.current;Object(r.useEffect)((function(){return function(){d.current=null,j.current=null}}),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("g",{style:{cursor:"pointer"},children:[Object(v.jsx)("circle",{ref:d,cy:f,cx:s,r:"22",fill:l?"#ebe534":"#16afc0",stroke:u,strokeWidth:"2.5",onPointerDown:i,onPointerUp:o,onPointerMove:c,onMouseOver:function(t){t.currentTarget.setAttribute("fill","#ebe534"),j.current.setAttribute("fill","black")},onMouseOut:function(t){t.currentTarget.setAttribute("fill","#16afc0"),j.current.setAttribute("fill","white")}}),Object(v.jsx)("text",{ref:j,style:{fontWeight:"bold"},y:f,x:s,dy:".35em",fontSize:"14",fill:l?"black":"white",textAnchor:"middle",children:n})]})})},L=i.a.memo(G,(function(t,e){return t.isDraged.dragActive===e.isDraged.dragActive&&t.size.y===e.size.y&&t.size.x===e.size.x})),V=function(t){var e=t.from,n=t.to,r=t.cost,i=t.color,o=void 0===i?"#cfcfcf":i,c=Object(u.d)((function(t){return t.direct.directed})),h=Object(a.a)(e,2),s=h[0],f=h[1],d=Object(a.a)(n,2),j=d[0],l=d[1],b=function(t,e){var n=Math.max(t[0],e[0]),r=Math.max(t[1],e[1]),i=Math.min(t[0],e[0]),o=Math.min(t[1],e[1]),c=0;return e[0]>t[0]&&e[1]>t[1]?c+=15:e[0]<t[0]&&e[1]<t[1]&&(c+=12),[(n-i)/2+i-c,(r-o)/2+o+c]}(e,n),g=Object(a.a)(b,2),p=g[0],O=g[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("g",{children:[Object(v.jsx)("defs",{children:Object(v.jsx)("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"24",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:Object(v.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#cfcfcf"})})}),Object(v.jsx)("path",{d:"M ".concat(s," ").concat(f," L ").concat(j," ").concat(l),strokeWidth:"2",stroke:o,markerEnd:!0===c?"url(#arrow)":""}),Object(v.jsx)("text",{y:O,x:p,dx:".3em",dy:".9em",fontSize:"14",fill:o,textAnchor:"right",children:r})]})})},R=function t(e,n){Object(k.a)(this,t),this.y=void 0,this.x=void 0,this.y=e,this.x=n},z=function(){function t(e){Object(k.a)(this,t),this.graphInfo=void 0,this.vertexCount=0,this.leftTop=void 0,this.rightBottom=void 0,this.nodeCoord=[],this.graphInfo=e.getGraphInfo(),this.leftTop=e.getLeftTop(),this.rightBottom=e.getRightBottom(),this.vertexCount=Number(this.graphInfo.vertexCount)}return Object(C.a)(t,[{key:"run",value:function(){return this.BinarySpacePartitioning(Object(s.a)({},this.leftTop),Object(s.a)({},this.rightBottom),0),this.extractNodeCoordList(),this.extractVertex()}},{key:"BinarySpacePartitioning",value:function(t,e,n){if(Math.pow(2,n)>=this.vertexCount){var r=Math.floor(Math.random()*(e.y-t.y)+t.y),i=Math.floor(Math.random()*(e.x-t.x)+t.x);this.nodeCoord.push(new R(r,i))}else{var o=Math.floor(Math.floor(2*Math.random())),c=Math.floor(3*Math.random()+4);if(0===o){var a=(e.y-t.y)*c/10+t.y;this.BinarySpacePartitioning(Object(s.a)({},t),new R(a,e.x),n+1),this.BinarySpacePartitioning(new R(a+1,t.x),Object(s.a)({},e),n+1)}else{var h=(e.x-t.x)*c/10+t.x;this.BinarySpacePartitioning(Object(s.a)({},t),new R(e.y,h),n+1),this.BinarySpacePartitioning(new R(t.y,h+1),Object(s.a)({},e),n+1)}}}},{key:"extractNodeCoordList",value:function(){for(var t=this.nodeCoord.length-this.vertexCount;t;){var e=this.nodeCoord.length,n=Math.floor(Math.random()*e);this.nodeCoord.splice(n,1),t--}}},{key:"extractVertex",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connectedList:[],coord:void 0},n={};return Object.entries(this.graphInfo.graph).forEach((function(r,i){var o=Object(a.a)(r,2),c=o[0],h=o[1];Object.keys(n).length>=t.vertexCount&&!1===Object.keys(n).includes(c)||(n[c]=n[c]||Object(s.a)({},e),n[c].coord||(n[c].coord=t.nodeCoord[0],t.nodeCoord.shift()),n[c].connectedList=t.connect(n,h))})),n}},{key:"connect",value:function(t,e){var n=this,r=[];return e.forEach((function(e){""!==e[0]&&void 0!==e[0]&&(Object.keys(t).length>=n.vertexCount&&void 0===t[e[0]]||(r.push(e),t[e[0]]=t[e[0]]||{connectedList:[],coord:void 0},t[e[0]].coord||(t[e[0]].coord=n.nodeCoord[0],n.nodeCoord.shift())))})),r}}]),t}(),D=function(){function t(){Object(k.a)(this,t),this.graphInfo=void 0,this.leftTop=void 0,this.rightBottom=void 0}return Object(C.a)(t,[{key:"setGraphInfo",value:function(t){return this.graphInfo=t,this}},{key:"setLeftTop",value:function(t){return this.leftTop=t,this}},{key:"setRightBottom",value:function(t){return this.rightBottom=t,this}},{key:"getGraphInfo",value:function(){return this.graphInfo}},{key:"getLeftTop",value:function(){return this.leftTop}},{key:"getRightBottom",value:function(){return this.rightBottom}},{key:"build",value:function(){return new z(this)}}]),t}(),H=20,W=function(t,e){return t<=H&&(t=40),t>=e.height-H&&(t=e.height-40),t};function U(){var t=Object(r.useRef)(null),e=Object(r.useState)({width:0,height:0}),n=Object(a.a)(e,2),i=n[0],o=n[1],c=Object(r.useState)({}),h=Object(a.a)(c,2),f=h[0],d=h[1],j=Object(r.useState)({dragActive:!1,currentNode:null}),l=Object(a.a)(j,2),b=l[0],g=l[1],p=Object(r.useState)([0,0]),O=Object(a.a)(p,2),x=O[0],m=O[1],y=Object(u.d)((function(t){return{graphInfo:t.graph.graph,shortestPath:t.path}}),u.b),k=y.graphInfo,C=y.shortestPath;Object(r.useEffect)((function(){o((function(e){return Object(s.a)(Object(s.a)({},e),{},{width:t.current.offsetWidth,height:t.current.offsetHeight})}));var e=(new D).setGraphInfo(k).setLeftTop(new R(40,40)).setRightBottom(new R(i.width-40,i.height-40)).build();d((function(t){return Object(s.a)({},e.run())}))}),[t,k,i.width,i.height]);var w=function(t){var e=t.currentTarget.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;t.currentTarget.setPointerCapture(t.pointerId),m((function(t){return[n,r]})),g((function(e){return Object(s.a)(Object(s.a)({},e),{},{dragActive:!0,currentNode:t.currentTarget})}))},T=function(){g((function(t){return Object(s.a)(Object(s.a)({},t),{},{dragActive:!1,currentNode:null})}))},I=Object.entries(f).map((function(t,e){var n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(v.jsx)(L,{size:{y:o.coord.y,x:o.coord.x},value:r,onPointerMove:function(e){return function(t,e){t.preventDefault();var n=Object(a.a)(e,2),r=n[0],o=n[1],c=t.movementX+x[1],h=t.movementY+x[0];if(b.dragActive){var u=Object(A.a)(x),j=W(o.coord.y-(u[1]-c),i),l=W(o.coord.x-(u[0]-h),i);d((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(F.a)({},r,Object(s.a)(Object(s.a)({},f[r]),{},{coord:new R(j,l)})))}))}}(e,t)},onPointerDown:w,onPointerUp:T,isDraged:b},e)})),M=Object.entries(f).map((function(t,e,n){var r=Object(a.a)(t,2),i=r[0],o=r[1],c=o.coord;return o.connectedList.map((function(t,r){var o=Object(a.a)(t,2),h=o[0],u=o[1],s=f[h].coord,d=function(t,e,n){var r=Object.keys(t);if(0===r.length)return!1;var i=r.indexOf(e),o=r.indexOf(n);return-1!==i&&-1!==o&&Math.abs(i-o)<=1}(C.path,i,h)?"#ebe534":void 0;return Object(v.jsx)(V,{from:[c.y,c.x],to:[s.y,s.x],cost:u,color:d},e*n.length+r)}))}));return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("main",{ref:t,children:Object(v.jsxs)("svg",{style:{width:i.width,height:i.height},children:[M,I]})})})}function X(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(B,{}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(N,{}),Object(v.jsx)(U,{})]})]})}var _=n(9),q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),o(t),c(t)}))},Y=n(20),J=n.n(Y),K=n(21),Q=Object(_.combineReducers)({graph:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;return e.type===l?Object(s.a)(Object(s.a)({},t),{},{graph:e.payload}):t},direct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;return e.type===m?Object(s.a)(Object(s.a)({},t),{},{directed:e.payload}):t},path:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;return e.type===f?Object(s.a)(Object(s.a)({},t),{},{from:e.payload.from,to:e.payload.to,path:e.payload.path}):t}}),Z=Object(_.createStore)(Q,J.a);c.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(K.a,{children:Object(v.jsx)(u.a,{store:Z,children:Object(v.jsx)(X,{})})})}),document.getElementById("root")),q()}},[[37,1,2]]]);
//# sourceMappingURL=main.30e2d5d7.chunk.js.map